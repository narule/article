import{p as e,Q as a,S as l,av as n,g as s,W as t,aw as o,U as u,n as r,e as d,X as i,Y as p,ax as v,a as c,P as m,ay as f,a0 as b,a1 as y,ah as h,w as g,an as V,a6 as x,a5 as w,o as k,at as _,a8 as C,aa as U,c as I,a9 as z,al as S,ad as j,az as A,ak as F,ab as P,af as B,aA as E,ac as $,t as D,am as q,aB as J,ag as N,aj as O,aC as Q,aD as R,aE as T,aF as W}from"./index-DlrOOw1b.js";const X=e({...a(),...l(n(),["inline"])},"VCheckbox"),Y=s()({name:"VCheckbox",inheritAttrs:!1,props:X(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,a){let{attrs:l,slots:n}=a;const s=t(e,"modelValue"),{isFocused:f,focus:b,blur:y}=o(e),h=u(),g=r((()=>e.id||`checkbox-${h}`));return d((()=>{const[a,t]=i(l),o=p.filterProps(e),u=v.filterProps(e);return c(p,m({class:["v-checkbox",e.class]},a,o,{modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,id:g.value,focused:f.value,style:e.style}),{...n,default:e=>{let{id:a,messagesId:l,isDisabled:o,isReadonly:r,isValid:d}=e;return c(v,m(u,{id:a.value,"aria-describedby":l.value,disabled:o.value,readonly:r.value},t,{error:!1===d.value,modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,onFocus:b,onBlur:y}),n)}})})),{}}}),G={class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"},H=f({__name:"login",setup(e){const a=b(),l=x(),n=w(),s=y("发送"),t=y(60),o=y(null),u=y(!0),r=y(!1),d=y(!1),i=y(!1),p=y(!1),v=y(!1),m=y(!0),f=y("password"),X=y({phone:"",password:"",vfCode:""}),H=y({phone:"",vfCode:"",password:""});function K(){m.value=!m.value}function L(){f.value="password"===f.value?"verificationCode":"password"}const M=n.query.from||"/user/";async function Z(){try{i.value=!0,X.value.loginType=f.value;const e=await T(X.value);i.value=!1,e.success?(a.userInfo=e.data,localStorage.setItem("userInfo",JSON.stringify(e.data)),localStorage.setItem("isAuthenticated",!0),a.isAuthenticated=!0,window.location=M):alert(e.msg)}catch(e){i.value=!1,alert("登录失败，请重试")}}async function ee(){try{i.value=!0;const e=await W(H.value);i.value=!1,e.success?(a.userInfo.nickname=e.data.nickname,a.userInfo.phone=e.data.phone,a.isAuthenticated=!0,l.push(a.fromPage?a.fromPage:"/")):alert(e.msg)}catch(e){i.value=!1,alert("注册失败，请重试")}}async function ae(){if(m.value&&X.value.phone||!m.value&&H.value.phone){if(u.value){const e={type:"phone",target:m.value?X.value.phone:H.value.phone,business:m.value?"login":"register"};await R(e),u.value=!1,s.value=`${t.value}s`,o.value&&clearInterval(o.value),o.value=setInterval((()=>{t.value>0?(t.value--,s.value=`${t.value}s`):(u.value=!0,clearInterval(o.value),t.value=60,s.value="发送")}),1e3)}}else alert("请输入手机号")}return(e,a)=>(k(),h("div",null,[c(_,{class:"mx-auto my-6","max-width":"100",src:"/user/assets/logo-CvVE8BnU.png"}),c(V,{class:"mx-auto pa-12 pb-8",elevation:"0","max-width":"448",rounded:"lg"},{default:g((()=>[c(C,{class:"d-flex justify-center",style:{"margin-top":"-36px"}},{default:g((()=>a[16]||(a[16]=[U("雪树服务")]))),_:1}),m.value?(k(),I(q,{key:0,onSubmit:A(Z,["prevent"]),ref:"loginForm",modelValue:v.value,"onUpdate:modelValue":a[4]||(a[4]=e=>v.value=e)},{default:g((()=>[a[19]||(a[19]=z("div",{class:"text-subtitle-1 text-medium-emphasis"},"手机号",-1)),c(S,{placeholder:"手机号",variant:"outlined",modelValue:X.value.phone,"onUpdate:modelValue":a[0]||(a[0]=e=>X.value.phone=e),rules:[e=>!!e||"手机号是必填项"]},null,8,["modelValue","rules"]),z("div",G,[U(j("password"===f.value?"密码":"验证码")+" ",1),z("a",{class:"text-caption text-decoration-none text-blue",href:"#",onClick:A(L,["prevent"])},j("password"===f.value?"使用验证码登录":"使用密码登录"),1)]),"password"===f.value?(k(),I(S,{key:0,type:d.value?"text":"password",placeholder:"Enter your password",modelValue:X.value.password,"onUpdate:modelValue":a[1]||(a[1]=e=>X.value.password=e),rules:[e=>!!e||"密码是必填项"],variant:"outlined"},null,8,["type","modelValue","rules"])):F("",!0),"password"===f.value?(k(),I(Y,{key:1,class:"d-flex justify-end mt-n5",style:{"margin-bottom":"10px"},modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=e=>d.value=e),color:"primary",label:"显示密码"},null,8,["modelValue"])):(k(),I(S,{key:2,variant:"outlined",modelValue:X.value.vfCode,"onUpdate:modelValue":a[3]||(a[3]=e=>X.value.vfCode=e),rules:[e=>!!e||"验证码是必填项"],dense:"","prepend-inner-icon":"mdi-shield-key",color:"primary",class:"mb-4","append-inner-icon":!0===u.value?"mdi-send":"mdi-timer","onClick:appendInner":ae},{"append-inner":g((()=>[c(P,{class:B(["send-btn",{"disabled-btn":"发送"!==s.value}]),disabled:"发送"!==s.value,onClick:ae,elevation:"0"},{default:g((()=>[U(j(s.value),1)])),_:1},8,["disabled","class"])])),_:1},8,["modelValue","rules","append-inner-icon"])),c(P,{class:"mb-5",size:"large",type:"submit",variant:"elevated",disabled:!v.value||i.value,color:"success",style:{position:"relative",display:"flex","align-items":"center"},block:""},{default:g((()=>[a[17]||(a[17]=z("span",{style:{"font-size":"18px","font-weight":"bold",position:"absolute"}},"登录",-1)),i.value?(k(),I(E,{key:0,indeterminate:"",size:"18",width:2,style:{"margin-left":"72px",position:"absolute"}})):F("",!0)])),_:1},8,["disabled"]),c($,{class:"text-center"},{default:g((()=>[z("a",{class:"text-blue text-decoration-none",href:"#",rel:"noopener noreferrer",onClick:A(K,["prevent"])},[a[18]||(a[18]=U(" 注册账号 ")),c(D,{icon:"mdi-chevron-right"})])])),_:1})])),_:1},8,["modelValue"])):(k(),I(q,{key:1,ref:"registerForm",modelValue:v.value,"onUpdate:modelValue":a[15]||(a[15]=e=>v.value=e),onSubmit:A(ee,["prevent"])},{default:g((()=>[c(S,{label:"手机号",variant:"outlined",modelValue:H.value.phone,"onUpdate:modelValue":a[5]||(a[5]=e=>H.value.phone=e),rules:[e=>!!e||"手机号是必填项"],dense:"","prepend-inner-icon":"mdi-cellphone",color:"primary",class:"mb-4"},null,8,["modelValue","rules"]),c(S,{"append-inner-icon":d.value?"mdi-eye-off":"mdi-eye",type:d.value?"text":"password",label:"密码",class:"mb-4",variant:"outlined",modelValue:H.value.password,"onUpdate:modelValue":a[6]||(a[6]=e=>H.value.password=e),rules:[e=>!!e||"密码是必填项"],dense:"","prepend-inner-icon":"mdi-lock-outline",color:"primary","onClick:appendInner":a[7]||(a[7]=e=>d.value=!d.value)},null,8,["append-inner-icon","type","modelValue","rules"]),c(S,{label:"手机号验证码",variant:"outlined",modelValue:H.value.vfCode,"onUpdate:modelValue":a[8]||(a[8]=e=>H.value.vfCode=e),rules:[e=>!!e||"验证码是必填项"],dense:"","prepend-inner-icon":"mdi-shield-key",color:"primary","append-inner-icon":!0===u.value?"mdi-send":"mdi-timer","onClick:appendInner":ae},{"append-inner":g((()=>[c(P,{class:B(["send-btn",{"disabled-btn":"发送"!==s.value}]),disabled:"发送"!==s.value,onClick:ae,elevation:"0"},{default:g((()=>[U(j(s.value),1)])),_:1},8,["disabled","class"])])),_:1},8,["modelValue","rules","append-inner-icon"]),c(Y,{modelValue:p.value,"onUpdate:modelValue":a[11]||(a[11]=e=>p.value=e),color:"primary",label:"阅读并同意隐私与服务条款",rules:[e=>!!e||"需要同意"]},{label:g((()=>[a[20]||(a[20]=U(" 我同意  ")),z("a",{href:"#",onClick:a[9]||(a[9]=A((e=>r.value=!0),["stop","prevent"]))},"服务条款"),a[21]||(a[21]=U("  和  ")),z("a",{href:"#",onClick:a[10]||(a[10]=A((e=>r.value=!0),["stop","prevent"]))},"隐私政策"),a[22]||(a[22]=U("* "))])),_:1},8,["modelValue","rules"]),c(P,{class:"mb-5",disabled:!v.value||i.value,color:"primary",size:"large",type:"submit",block:"",large:"",style:{position:"relative",display:"flex","align-items":"center"}},{default:g((()=>[a[23]||(a[23]=z("span",{style:{"font-size":"18px","font-weight":"bold",position:"absolute"}},"注册",-1)),i.value?(k(),I(E,{key:0,indeterminate:"",size:"18",width:2,style:{"margin-left":"72px",position:"absolute"}})):F("",!0)])),_:1},8,["disabled"]),c(J,{modelValue:r.value,"onUpdate:modelValue":a[14]||(a[14]=e=>r.value=e),"max-width":"210mm",persistent:""},{default:g((()=>[c(V,null,{default:g((()=>[c(C,{class:"text-h5 bg-grey-lighten-3"},{default:g((()=>a[24]||(a[24]=[U(" 服务条款和隐私政策 ")]))),_:1}),c($,{style:{"max-height":"297mm","overflow-y":"auto"}},{default:g((()=>a[25]||(a[25]=[z("p",null," 欢迎使用密卡服务！在您使用本网站及相关服务前，请仔细阅读并理解以下服务条款和隐私政策。您一旦选择“同意”并使用本服务，即表示您已阅读、理解并同意受以下条款的约束。 ",-1),z("p",null,[z("strong",null,"一、服务说明")],-1),z("p",null," 匹配密卡（以下简称“本服务”）由 sntree.cn 提供，旨在帮助用户通过自定义条件进行匹配查询。您应确保在使用本服务时提供的信息真实、准确。sntree.cn 保留随时对服务内容进行调整、暂停或终止的权利。 ",-1),z("p",null,[z("strong",null,"二、用户信息收集和使用")],-1),z("p",null," 为了向您提供更好的服务，我们可能会收集您的个人信息，包括但不限于姓名、联系方式、查询条件等。我们承诺严格按照中国《网络安全法》《个人信息保护法》等法律法规，采取合理的安全措施保护您的信息，不会在未经您许可的情况下将您的信息用于未声明的用途。 ",-1),z("p",null,[z("strong",null,"三、隐私保护政策")],-1),z("p",null," 我们非常重视您的隐私保护。本服务不会在未经您同意的情况下公开或共享您的个人信息，除非符合以下情况：1）为满足法律、法规或司法机关的要求；2）为维护sntree.cn 的合法权益；3）经您明确授权或同意。 ",-1),z("p",null,[z("strong",null,"四、用户责任")],-1),z("p",null," 您在使用本服务时应遵守中国的相关法律法规，不得利用本服务从事任何违法或不正当的行为，如散布虚假信息、侵犯他人隐私等。若您违反相关规定，sntree.cn 保留依法追究其法律责任的权利。 ",-1),z("p",null,[z("strong",null,"五、免责声明")],-1),z("p",null," 本服务可能因系统维护或升级等原因短暂停止服务，sntree.cn 将尽可能提前通知您，但不对由此产生的任何不便或损失承担责任。同时，本服务内容仅供参考，不作为法律、医学或其他专业建议。 ",-1),z("p",null,[z("strong",null,"六、条款修改")],-1),z("p",null," sntree.cn 有权根据法律法规的变化和实际运营需要不时地更新本条款。更新后的条款将通过网站公告的方式通知用户，用户继续使用本服务视为接受该等修改。 ",-1),z("p",null,"感谢您信任 sntree.cn，您的支持是我们持续改进的动力！",-1)]))),_:1}),c(N),c(O,null,{default:g((()=>[c(P,{variant:"text",onClick:a[12]||(a[12]=e=>(p.value=!1,r.value=!1))},{default:g((()=>a[26]||(a[26]=[U(" 不同意 ")]))),_:1}),c(Q),c(P,{color:"primary",variant:"tonal",onClick:a[13]||(a[13]=e=>(p.value=!0,r.value=!1))},{default:g((()=>a[27]||(a[27]=[U(" 同意 ")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),c($,{class:"text-center"},{default:g((()=>[z("a",{class:"text-blue text-decoration-none",href:"#",rel:"noopener noreferrer",onClick:A(K,["prevent"])},[a[28]||(a[28]=U(" 已有账号登录 ")),c(D,{icon:"mdi-chevron-right"})])])),_:1})])),_:1},8,["modelValue"]))])),_:1})]))}},[["__scopeId","data-v-b8aef5ca"]]);export{H as default};
